load("@rules_foreign_cc//tools/build_defs:cmake.bzl", "cmake_external")

cmake_external(
    name = "tgbot",
    lib_source = "@tgbot//:all",
    headers_only = False,
    static_libraries = ["libTgBot.a"],
    visibility = ["//visibility:public"],
    cache_entries = {
        "CMAKE_INSTALL_LIBDIR": "lib",
        "CMAKE_INSTALL_FULL_LIBDIR": "/lib",
        "BOOST_ROOT": "$EXT_BUILD_DEPS/",
        "Boost_USE_STATIC_LIBS": "On",
        "Boost_LIBRARIES": "system",
        "Boost_SYSTEM_LIBRARY_DEBUG": "$EXT_BUILD_DEPS/lib/libsystem.a",
        "Boost_SYSTEM_LIBRARY_RELEASE": "$EXT_BUILD_DEPS/lib/libsystem.a",
        "Boost_SYSTEM_FOUND": "True",
        "OPENSSL_INCLUDE_DIR": "$EXT_BUILD_DEPS/ssl/include",
        "OPENSSL_SSL_LIBRARY": "$EXT_BUILD_DEPS/ssl/libssl.a",
        "OPENSSL_CRYPTO_LIBRARY": "$EXT_BUILD_DEPS/ssl/libcrypto.a",
        "ZLIB_ROOT": "$EXT_BUILD_DEPS/zlib",
        "ZLIB_LIBRARY_RELEASE": "$EXT_BUILD_DEPS/zlib/lib/libz.a",
        "CURL_ROOT": "$EXT_BUILD_DEPS/curl",
        "CURL_INCLUDE_DIR": "$EXT_BUILD_DEPS/curl/include",
        "CURL_LIBRARY_RELEASE": "$EXT_BUILD_DEPS/curl/lib/libcurl.a",
   },
    deps = [
        '@boost//:system',
        '@boost//:property_tree',
        '@boost//:variant',
        '@boost//:algorithm',
        '@boost//:asio_ssl',
        '//curl:curl',
        '//zlib:zlib',
    ],
)
